<!DOCTYPE html>
<html lang="en">
    <%- include('./partials/head.ejs') %>
<body>
    <div class="container">  
        <h2 class="ProductName">Product Name</h2>
        <a href="">
            <i class="fas fa-eye"></i>  
            Client View
        </a>
           
        <form action="/admin/editProduct?id=<%= productToEdit.id %> " method="POST" enctype="multipart/form-data">
        <p>
            <label for="productName"> 
                <h3>Product Name:</h3></label>
            <input  type="text" id="productName" name="productName" value ="<%= productToEdit.name %>">
        </p>
        <p>
            <label for="productDescription">
                <h3>Description:</h3>
            </label>
            <textarea name="productDescription" id="productDescription" rows="10">
                <%= productToEdit.description%>
            </textarea>
        </p>
        <p>
            <label for="">
                <h3>Images:</h3>
            </label>
                 <div class="second-images">
                    <div class="second-img" id='preview' >
                        </div>
                    
                </div> 
                <div class="file-btn-container">
                    <label class="file-btn">
                        <input id="browse" name="productImages" type="file" onchange="previewFiles()" multiple>
                        UPLOAD IMAGES
                    </label>
                </div>              
        </p>
        <h3>Collection:</h3>

        <select name="collection" id=""  multiple size="4">
            <% collections.forEach(col => { %>
                <option value="<%= col.id%>" <%=productToEdit.collection.includes(col.id.toString()) ? "selected" : " " %> > 
                    <%= col.name %> </option>             
            <% }) %>
        </select>

        <h3>Product Data:</h3>
        <div class="product-data-container">
            <div class="columns">
                <div class="price" >Price</div>
                <div class="discount" >Discount</div>
                <div class="cost" >Cost</div>
                <div class="sku" >SKU</div>
                <div class="stock">Stock</div>
            </div> 
            
            <div class="columns">
                <div class="price">
                    <input type="text" name="price" value ="<%= productToEdit.price %>">
                </div>
                <div class="discount">
                    <input type="text" name="discount" value ="<%= productToEdit.discount %>">
                </div>
                <div class="cost">
                    <input type="text" name="cost" value ="<%= productToEdit.cost %>">
                </div>
                <div class="sku">
                    <input type="text"  name="sku" value ="<%= productToEdit.sku %>">
                </div>
                <div class="stock">
                    <input type="text" name="stock"  value ="<%= productToEdit.stock %>">
                </div>
            </div> 
        </div>
        <div class="btn-containers">        
            <button class="btn" type="submit">SAVE</button>
            
        </div>
        </form>
        <form action="/admin/delete/<%=id%>" method="POST">
            <button type="submit" class="btn">Delete</button>
        </form> 

    </div>
</body>
<script>
function previewFiles() {

var preview = document.querySelector('#preview');
var files   = document.querySelector('input[type=file]').files;

function readAndPreview(file) {

  // Make sure `file.name` matches our extensions criteria
  if ( /\.(jpe?g|png|gif)$/i.test(file.name) ) {
    var reader = new FileReader();
    document.querySelector('.second-images').style.display='block';

    reader.addEventListener("load", function () {
      var image = new Image();
      image.title = file.name;
      image.src = this.result;
      preview.appendChild( image );
    }, false);

    reader.readAsDataURL(file);
  }

}

if (files) {
  [].forEach.call(files, readAndPreview);
}

}
</script>
</html>

<!-- 
<div class="media-box">
    <div class="main-img">
        <img src="https://cdn.shopify.com/s/files/1/0250/7217/3141/products/GERALD_1024x1024.png?v=1578330887" alt="" class="">
    </div>
    <div class="second-images">
        <div class="second-img">
            <img src="https://cdn.shopify.com/s/files/1/0250/7217/3141/products/Bill_1024x1024.png?v=1588428074" alt="" class="">
        </div>
        <div class="second-img">
            <img src="https://cdn.shopify.com/s/files/1/0250/7217/3141/products/Ronald_1024x1024.png?v=1588428074" alt="" class="">
        </div>
        <div class="second-img">
            <img src="https://cdn.shopify.com/s/files/1/0250/7217/3141/products/GEORGE_1024x1024.png?v=1578365352" alt="" class="">
        </div>
        <div class="file-btn-container">
            <label class="file-btn">
                <input type="file">
                UPLOAD
            </label>
        </div>
        
                
    </div>               
    
</div> -->